apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: k8s-patch-json-pod-
  annotations:
    workflows.argoproj.io/description: |
      This example shows a more advanced patch with json mergeStrategy
  labels:
    workflows.argoproj.io/test: 'true'
spec:
  entrypoint: main
  templates:
  - name: main
    resource:
      action: patch
      manifest: |
        - op: add
          path: /metadata/annotations/foo
          value: bar
      mergeStrategy: json
      flags:
      - pod
      - '{{pod.name}}'
