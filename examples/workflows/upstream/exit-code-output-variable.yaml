apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: exit-code-output-variable-
spec:
  entrypoint: exit-code-output-variable
  templates:
  - name: exit-code-output-variable
    steps:
    - - name: failing-container
        template: failing-container
        continueOn:
          failed: true
    - - name: echo-container
        template: echo-container
        arguments:
          parameters:
          - name: exitCode
            value: '{{steps.failing-container.exitCode}}'
  - name: failing-container
    container:
      image: alpine:3.6
      args:
      - exit 123
      command:
      - sh
      - -c
  - name: echo-container
    container:
      image: alpine:3.6
      args:
      - 'echo "Exit code was: {{inputs.parameters.exitCode}}"'
      command:
      - sh
      - -c
    inputs:
      parameters:
      - name: exitCode
