apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: secrets-
spec:
  entrypoint: print-secret
  templates:
  - name: print-secret
    container:
      image: alpine:3.7
      args:
      - ' echo "secret from env: $MYSECRETPASSWORD"; echo "secret from file: `cat
        /secret/mountpath/mypassword`" '
      command:
      - sh
      - -c
      env:
      - name: MYSECRETPASSWORD
        valueFrom:
          secretKeyRef:
            name: my-secret
            key: mypassword
      volumeMounts:
      - name: my-secret-vol
        mountPath: /secret/mountpath
  volumes:
  - name: my-secret-vol
    secret:
      secretName: my-secret
