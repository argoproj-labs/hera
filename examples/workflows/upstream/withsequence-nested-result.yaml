apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: withsequence-nested-result-
spec:
  entrypoint: hello-entrypoint
  templates:
  - name: hello-entrypoint
    steps:
    - - name: hello-a
        template: hello
    - - name: hello-b
        template: hello-hello
        withSequence:
          end: '{{steps.hello-a.outputs.result}}'
          start: '1'
  - name: hello-hello
    steps:
    - - name: hello-b
        template: hello
    - - name: hello-c
        template: hello
        withSequence:
          end: '{{steps.hello-b.outputs.result}}'
          start: '1'
  - name: hello
    script:
      image: python:alpine3.6
      source: |
        import random
        result = random.randint(0,5)
        print(result)
      command:
      - python
