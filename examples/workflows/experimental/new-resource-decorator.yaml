apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: resource-workflow-
spec:
  entrypoint: basic-hello-world
  templates:
  - name: basic-hello-world
    inputs:
      parameters:
      - name: pvc_size
        default: '10'
    outputs:
      parameters:
      - name: pvc-name
        valueFrom:
          jsonPath: '{.metadata.name}'
    resource:
      action: create
      manifest: |
        apiVersion: v1
        kind: PersistentVolumeClaim
        metadata:
            generateName: pvc-example-
        spec:
            accessModes: ['ReadWriteOnce', 'ReadOnlyMany']
            resources:
            requests:
                storage: '{{inputs.parameters.pvc-size}}'
      setOwnerReference: true
